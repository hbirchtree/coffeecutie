project ( @PJNAME@ )
cmake_minimum_required(VERSION 3.1)

set ( CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR}/bin )

set ( COFFEE_DESKTOP_DIRECTORY "${CMAKE_SOURCE_DIR}/desktop" )
set ( CMAKE_PACKAGED_OUTPUT_PREFIX packaged )
set ( COFFEE_PACKAGE_DIRECTORY "${PROJECT_BINARY_DIR}/${CMAKE_PACKAGED_OUTPUT_PREFIX}" )
set ( COFFEE_DEPLOY_DIRECTORY "${PROJECT_BINARY_DIR}/deploy" )
set ( COFFEE_SOURCE_TEMPLATE_DIRECTORY "${CMAKE_SOURCE_DIR}/internal/templates" )

if(ANDROID)
    set ( CMAKE_MODULE_PATH
        ${CMAKE_SOURCE_DIR}/cmake/Find_Android
        ${CMAKE_MODULE_PATH}
        )
endif()
if(WIN32)
    set ( CMAKE_MODULE_PATH
        ${CMAKE_SOURCE_DIR}/cmake/Find_Windows
        ${CMAKE_MODULE_PATH}
        )
endif()

set ( CMAKE_MODULE_PATH
    ${CMAKE_MODULE_PATH}
    ${CMAKE_SOURCE_DIR}/cmake/Find
    ${CMAKE_SOURCE_DIR}/cmake/Modules
    ${CMAKE_SOURCE_DIR}/cmake/Packaging
    )

include ( BuildFlags )
include ( BuildFunctions )
include ( PackagingOptions )
include ( TestingOptions )

option ( BUILD_TESTS "Build unit tests" ON )

find_package ( Coffee REQUIRED )
find_package ( StandardLibs REQUIRED )
find_package ( SDL2 REQUIRED )

set ( SRCS
    @SRCS@
    )

set ( USERDATA
    "${CMAKE_SOURCE_DIR}/rsrc/@PJNAME@"
    )

set ( BUNDLE_LIBS
    @BUNDLE_LIBS@
    )

set ( LIBS
    @LIBS@
    ;${BUNDLE_LIBS}
    )

set ( PERMS
    OPENGL;AUDIO;ENVIRONMENT_SENSORS;NETWORK_CONNECT;JOYSTICK
    )

include_directories ( "${COFFEE_INCLUDE_DIR}" )

coffee_add_application_longerer ( @PJNAME@ "@TITLE@"
        "@COMPANY@" "1"
        "@DESC@" "@COPYRIGHT@"
        "${SRCS}" "${LIBS}"
        "${BUNDLE_LIBS}" "${USERDATA}"
        "${LICENSES}" "${PERMS}"
        "${BUNDLE_BINS}"
        )
