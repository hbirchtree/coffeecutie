project ( @PJNAME@ )
cmake_minimum_required(VERSION 3.1)

set ( CMAKE_MODULE_PATH "${CMAKE_MODULE_PATH};${CMAKE_SOURCE_DIR}/cmake/Modules" )
include( SubprojectFunctions )
Init_Subproject()

find_package ( Coffee REQUIRED )
find_package ( StandardLibs REQUIRED )
find_package ( SDL2 REQUIRED )

set ( SRCS
    @SRCS@
    )

set ( USERDATA
    "${CMAKE_SOURCE_DIR}/rsrc/@PJNAME@"
    )

set ( BUNDLE_LIBS
    @BUNDLE_LIBS@
    )

set ( LIBS
    @LIBS@
    ;${BUNDLE_LIBS}
    )

set ( PERMS
    OPENGL;AUDIO;ENVIRONMENT_SENSORS;NETWORK_CONNECT;JOYSTICK
    )

include_directories ( "${COFFEE_INCLUDE_DIR}" )

coffee_add_application_longerer (
        TARGET @PJNAME@
        
        # App meta-data
        TITLE "@TITLE@"
        COMPANY "@COMPANY@"
        COPYRIGHT "@COPYRIGHT@"
        VERSION_CODE "1"
        INFO_STRING "@DESC@"
        PERMISSIONS ${PERMS}
        BUNDLE_LICENSES ${LICENSES}
        
        # Linker resources and programs
        SOURCES ${SRCS}
        LIBRARIES ${LIBS}
        BUNDLE_LIBRARIES ${BUNDLE_LIBS}
        BUNDLE_BINARIES ${BUNDLE_BINS}
        
        # Application sources
        RESOURCES ${USERDATA}
        )
